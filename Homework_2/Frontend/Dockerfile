#NEXT APP
FROM node:lts-alpine3.19
WORKDIR /usr/src/app
COPY . .
RUN npm install

RUN echo "NEXT_PUBLIC_APP_API_KEY=$NEXT_PUBLIC_APP_API_KEY" > .env.local
RUN echo "NEXT_PUBLIC_APP_AUTH_DOMAIN=$NEXT_PUBLIC_APP_AUTH_DOMAIN" >> .env.local
RUN echo "NEXT_PUBLIC_APP_PROJECT_ID=$NEXT_PUBLIC_APP_PROJECT_ID" >> .env.local
RUN echo "NEXT_PUBLIC_APP_STORAGE_BUCKET=$NEXT_PUBLIC_APP_STORAGE_BUCKET" >> .env.local
RUN echo "NEXT_PUBLIC_APP_MESSAGING_SENDER_ID=$NEXT_PUBLIC_APP_MESSAGING_SENDER_ID" >> .env.local
RUN echo "NEXT_PUBLIC_APP_APP_ID=$NEXT_PUBLIC_APP_APP_ID" >> .env.local


RUN npm run build

CMD ["npm", "start"]
